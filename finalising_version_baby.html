<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Flip with Parallax</title>
    <style>
        body, html {
            margin: 0;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #f0f0f0;
        }
        .card-container {
            width: 300px;
            height: 600px;
            perspective: 1000px;
        }
        .card {
            width: 100%;
            height: 100%;
            border-radius: 30px;
            overflow: hidden;
            transform-style: preserve-3d;
            position: relative;
            animation: float 3s ease-in-out infinite;
            transition: transform 0.6s ease;
        }
        .front, .back {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            backface-visibility: hidden;
        }
        .front {
            background: url('https://preview.redd.it/ars-goetia-if-there-had-been-contemporary-oil-paintings-of-v0-zmra82j85wec1.jpg?width=1024&format=pjpg&auto=webp&s=c59b3cab376aaaa04e2a6198d042e532a42e7817') center/cover no-repeat;
        }
        .back {
            background: url('https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2Fddb98739-d1ac-4601-ba5a-38415435e67b_780x1417.webp') center/cover no-repeat;
            background-size: 110% 106%;
            transform: rotateY(180deg);
        }
        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }
    </style>
</head>
<body>
    <div class="card-container">
        <div class="card">
            <div class="front"></div>
            <div class="back"></div>
        </div>
    </div>

    <script>
        const card = document.querySelector('.card');
        const front = document.querySelector('.front');
        const back = document.querySelector('.back');
        let isFlipped = false;
        let isTouch = false;
        let lastTap = 0;

        // Detect if the device is touchscreen
        const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints;

        // Function to flip the card
        const flipCard = () => {
            if (isFlipped) {
                card.style.transform = ''; // Reset to front
                front.style.backfaceVisibility = 'visible';
                back.style.backfaceVisibility = 'hidden';
            } else {
                card.style.transform = 'rotateY(180deg)'; // Flip to back
                front.style.backfaceVisibility = 'hidden';
                back.style.backfaceVisibility = 'visible';
            }
            isFlipped = !isFlipped;
        };

        // Parallax effect: drag card
        let lastX = 0, lastY = 0;

        const applyParallax = (x, y) => {
            const dx = (x - lastX) * 0.2;
            const dy = (y - lastY) * 0.2;
            card.style.transform = `rotateY(${dx}deg) rotateX(${dy}deg)`;
            lastX = x;
            lastY = y;
        };

        // Event listener for "X" key press (for Desktop)
        document.addEventListener('keydown', (event) => {
            if (event.key === 'x' || event.key === 'X') {
                flipCard();
            }
        });

        if (isTouchDevice) {
            // Touch events for touchscreen
            let lastTouch = 0;

            // Double-tap detection on touchscreen
            card.addEventListener('touchend', (e) => {
                const currentTime = new Date().getTime();
                const timeDiff = currentTime - lastTouch;

                if (timeDiff < 300) {
                    flipCard(); // Flip card on double tap
                }

                lastTouch = currentTime;
            });

            // Parallax effect on touchscreen (drag with finger)
            card.addEventListener('touchmove', (e) => {
                const touch = e.touches[0];
                applyParallax(touch.clientX, touch.clientY);
            });
        } else {
            // Mouse events for desktop
            let isDragging = false;

            // Start drag on mouse down
            card.addEventListener('mousedown', (e) => {
                isDragging = true;
                lastX = e.clientX;
                lastY = e.clientY;
            });

            // Stop dragging on mouse up
            document.addEventListener('mouseup', () => {
                isDragging = false;
            });

            // Parallax effect with mouse drag
            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    applyParallax(e.clientX, e.clientY);
                }
            });
        }
    </script>
</body>
</html>
